#-*-coding:utf-8-*-
"""
Simple demo of a horizontal bar chart.
"""
import json
import pandas as pd
import pylab
import sys
reload(sys)
sys.setdefaultencoding('utf-8')
import matplotlib
import matplotlib.pyplot as plt; plt.rcdefaults()
import numpy as np
import matplotlib.pyplot as plt
matplotlib.rcParams['font.sans-serif'] = ['Droid Sans Fallback']


_matters = json.loads(open('data/matters.json','r').read())
matters = [{'name':m,'count':len(_matters[m])} for m in _matters if len(_matters[m])>=10]

plt.figure()
df = pd.DataFrame(matters)
df = df.sort(columns='count',ascending=True)

fig = df.plot(kind='barh',yticks=df['count']).get_figure()
fig.savefig('out.png')

# Example data

#y_pos = np.arange(len(matters))
#performance = [len(matters[m]) for m in matters]
#error = np.zeros(len(matters))
#
#plt.barh(y_pos, performance, xerr=error, align='edge', alpha=0.4)
#plt.yticks(y_pos, matters.keys())
#plt.xlabel(u'使用次数')
#plt.ylabel(u'食材')
#plt.title(u'全部作品中各食材的使用次数')
#plt.show()
